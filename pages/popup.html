<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PromptFinder</title>
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/pages/popup.css" />
    <link rel="stylesheet" href="../css/pages/auth.css" /> <!-- Added auth.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="../js/css-class-helper.js"></script>
  </head>

  <body>
    <div class="popup-container">
      <!-- Header -->
      <header class="pf-header">
        <h1>PromptFinder</h1>
        <div class="header-actions">
          <button id="account-button" aria-label="Account">
            <i class="fas fa-user-circle"></i> <!-- Placeholder icon -->
          </button>
          <button id="settings-button" aria-label="Settings">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </header>

      <!-- Main content area (will be hidden when auth view is shown) -->
      <main id="main-content">
        <!-- Search and filter/sort controls -->
        <section class="controls">
          <label for="search-input" class="visually-hidden">Search Prompts</label>
          <input type="text" id="search-input" placeholder="Search prompts..." class="form-input" />
          <div class="actions">
            <button id="filter-button" class="button button-secondary button-sm">
              <i class="fas fa-filter" aria-hidden="true"></i> Filters
            </button>
            <button id="sort-button" class="button button-secondary button-sm">
              <i class="fas fa-clock" aria-hidden="true"></i> Sort
            </button>
          </div>
          <div id="rating-filter" class="filter-panel hidden">
            <label for="min-rating" class="form-label">Minimum Rating:</label>
            <select id="min-rating" class="form-input">
              <option value="0">Any</option>
              <option value="1">★</option>
              <option value="2">★★</option>
              <option value="3">★★★</option>
              <option value="4">★★★★</option>
            </select>
          </div>
        </section>
        <p id="confirmation-message" class="hidden" aria-live="polite"></p>
        <p id="error-message" class="hidden" aria-live="assertive"></p>
        <div class="add-prompt-bar">
          <button id="add-prompt-button" class="button button-primary">
            <i class="fas fa-plus" aria-hidden="true"></i> Add New Prompt
          </button>
        </div>
        <nav class="tabs" role="tablist" aria-label="Prompt categories">
          <button id="tab-all" role="tab" aria-selected="true" class="active">All Prompts</button>
          <button id="tab-favs" role="tab" aria-selected="false">Favorites</button>
          <button id="tab-private" role="tab" aria-selected="false">Private</button>
        </nav>
        <section id="prompts-list" class="cards-container"></section>
        <section id="prompt-details-section" class="hidden"> </section>
        <section id="add-prompt-section" class="hidden"> </section>
        <footer class="bottom-bar hidden"></footer>
      </main>

      <!-- Authentication View (initially hidden) -->
      <section id="auth-view" class="hidden auth-container">
        <h2>Login or Signup</h2>
        <!-- Login Form -->
        <form id="login-form">
          <h3>Login</h3>
          <div>
            <label for="login-email">Email:</label>
            <input type="email" id="login-email" required />
          </div>
          <div>
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" required />
          </div>
          <button type="submit" class="button button-primary">Login</button>
        </form>
        <hr />
        <!-- Signup Form -->
        <form id="signup-form">
          <h3>Signup</h3>
          <div>
            <label for="signup-email">Email:</label>
            <input type="email" id="signup-email" required />
          </div>
          <div>
            <label for="signup-password">Password:</label>
            <input type="password" id="signup-password" required />
          </div>
          <button type="submit" class="button button-primary">Signup</button>
        </form>
        <hr />
        <!-- Social Login Placeholder -->
        <div>
          <button id="google-signin-button" class="button button-secondary">
            <i class="fab fa-google"></i> Sign in with Google
          </button>
        </div>
        <p id="auth-error-message" class="error-message hidden" aria-live="assertive"></p>
        <button id="cancel-auth-button" class="button button-link">Cancel</button>
      </section>

    </div>

    <!-- Load Firebase SDK Compatibility (UMD) bundles from node_modules -->
    <script src="../node_modules/firebase/firebase-app-compat.js"></script>
    <script src="../node_modules/firebase/firebase-auth-compat.js"></script>

    <script src="../js/firebase-init.js"></script> <!-- Uses global firebase -->
    <script src="../js/utils.js"></script>
    <script src="../js/promptData.js"></script>
    <script src="../js/ui.js"></script>
    <script src="../app.js"></script>
  </body>
</html>
